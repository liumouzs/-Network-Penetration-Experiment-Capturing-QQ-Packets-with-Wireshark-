---
title: "使用Wireshark抓取QQ数据包的完整教程"
date: 2025-11-14
categories: [网络安全, 渗透测试]
tags: [wireshark, qq, 抓包, tcp, 取证]
---

# 使用Wireshark抓取QQ数据包的完整教程

**发布时间**: 2025年11月  
**分类**: 网络安全 / 渗透测试  
**难度**: 入门级

---

## 实验概述

本教程详细介绍如何通过Wireshark捕获QQ移动端向PC端传输的图片数据包，并进行数据提取与分析。适合网络安全初学者了解即时通讯协议分析和数据包取证。

---

## 实验环境

- **移动设备**: 安装QQ的智能手机（iOS/Android）
- **PC端**: Windows系统，登录另一个QQ账号
- **抓包工具**: Wireshark（最新稳定版）
- **十六进制编辑器**: WinHex
- **网络环境**: 手机与电脑连接**同一WiFi网络**

---

## 实验目标

通过技术手段捕获并恢复QQ传输的JPEG图片文件，理解TCP协议在即时通讯中的应用。

---

## 详细步骤

### 步骤1: 准备抓包环境

确保手机与电脑连接到同一WiFi网络。提前打开WinHex和PC端QQ，保持登录状态。

启动Wireshark，双击选择监听**WLAN2**网卡（根据实际情况选择正确的无线网卡），开始捕获数据包。

### 步骤2: 触发数据传输

**关键点**: 通过手机QQ向"我的电脑"发送目标图片。建议一次性发送**多张**照片以提高抓包成功率。

操作顺序：
1. 手机端发送图片到"我的电脑"
2. PC端QQ中打开"我的手机"会话
3. 在PC端下载并查看图片，等待加载完成

*注: 使用自己账号互发相比跨账号发送更难捕获*

### 步骤3: 过滤源IP地址

在Wireshark显示过滤器中输入：ip.src == [手机IP地址]

**获取手机IP方法**: 进入手机WiFi设置 → 高级选项 → 查看IP地址

### 步骤4: 定位JPEG文件头

使用**Ctrl+F**打开搜索框：
- **搜索模式**: 选择"十六进制值(Hex Value)"
- **搜索内容**: `ff d8` (JPEG文件的Magic Number)

通过搜索结果可确认新版QQ使用**TCP协议**传输图片数据。

### 步骤5: 提取TCP数据流

右键点击包含`ff d8`的数据包 → 选择 **追踪流(Track Stream)** → **TCP Stream**

在弹出的TCP流窗口中：
1. 查看原始数据
2. 将原始数据**另存为** `888.jpg`

*此时直接打开文件会报错*

### 步骤6: 清理文件头并恢复图片

**使用WinHex处理**:
1. 用WinHex打开保存的 `888.jpg`
2. **删除** `FF D8` 之前的所有无效十六进制数据
3. **另存为** `8888.jpg`

现在图片可正常显示，实验完成！

---

## 图片占位说明

请将以下截图插入对应位置：

1. **步骤1**: Wireshark启动界面与网卡选择
2. **步骤2**: 手机QQ发送照片到"我的电脑"的界面
3. **步骤3**: Wireshark IP过滤设置界面
4. **步骤4**: 搜索`ff d8`十六进制值的结果
5. **步骤5**: TCP Stream追踪窗口与原始数据
6. **步骤6**: WinHex中删除无效数据前后的对比
7. **结果**: 最终恢复的图片示例

---

## ⚠️ 重要安全警示

### 法律与伦理声明

本教程仅供**教育研究**和**网络安全学习**使用，旨在：
- 理解网络协议工作原理
- 提升数据包分析技能
- 增强个人信息保护意识

**严禁用于**:
- 非法窃取他人隐私数据
- 未授权的网络监控
- 任何违反法律法规的行为


---

## 技术总结

通过本实验可掌握：
- Wireshark抓包与过滤器使用
- TCP流追踪技术
- 文件签名(File Signature)识别
- 十六进制数据清理与文件恢复


---

